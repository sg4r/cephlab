#!/bin/sh

if ! grep -q 192.168.111.10 /etc/hosts; then
    cat >> /etc/hosts << EOF
192.168.111.10 cephclt
192.168.111.11 cn1
192.168.111.12 cn2
192.168.111.13 cn3
192.168.111.14 cn4
192.168.111.15 cnrgwha
192.168.111.16 cnrgw1
192.168.111.17 cnrgw2
EOF
fi

cat > /home/vagrant/.ssh/id_rsa << EOF
-----BEGIN OPENSSH PRIVATE KEY-----
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
OCal5a2NCyRA8AAAAIc2ViQHdvcmsBAgM=
-----END OPENSSH PRIVATE KEY-----
EOF
chmod 600 /home/vagrant/.ssh/id_rsa
chown vagrant:vagrant /home/vagrant/.ssh/id_rsa

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDkXqEQpPbe+0gBqu2z207BllzAltG8/JBZRTX82yisu6KK/BSAm0OVgjbSnM6cRHleRPo3QOgY9cn7wV2RnwCbS0u1tG5vDl6Gcj985dBlPK4m+ByzHezEIYLD+gUiarZSHuRSVJaKe/hRh02jNSIk9zsmIs3JuN4SiE7q0YeYOVvl9EL/ZlL4e0b2sEUIQ2784q909qOSf92tvHxJnXKasMCHoAKZgHjuiIIDtX5hObCOQDB4Fu8S+yj0raWtnpQGRavXZ2t8dUDOG5ewDwulRXc/B3AhnCJtax2ekTkfJ6GQ19WG5zGX3k7sCT9HNE2WOYGeRaIhdaJ8RWYLgDKJzCKQkmLKL1dcBa/cx9+BkSGEH/CReaBm1I32Hz7tueQcpAvjUT2M5xr7Dx1z8G0yD8Cb6wHHV4EHnVcGFJNPvyuPoDkzV1ZX2Dgp+BMAEZ3QjdpM5MqiqhxUwHwvqCeb+NRVV5xRSur9idn3+8IFpi2SQw+/Ri6k9L8n2yiz55k= vclt@ceph" >> /home/vagrant/.ssh/authorized_keys
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDkXqEQpPbe+0gBqu2z207BllzAltG8/JBZRTX82yisu6KK/BSAm0OVgjbSnM6cRHleRPo3QOgY9cn7wV2RnwCbS0u1tG5vDl6Gcj985dBlPK4m+ByzHezEIYLD+gUiarZSHuRSVJaKe/hRh02jNSIk9zsmIs3JuN4SiE7q0YeYOVvl9EL/ZlL4e0b2sEUIQ2784q909qOSf92tvHxJnXKasMCHoAKZgHjuiIIDtX5hObCOQDB4Fu8S+yj0raWtnpQGRavXZ2t8dUDOG5ewDwulRXc/B3AhnCJtax2ekTkfJ6GQ19WG5zGX3k7sCT9HNE2WOYGeRaIhdaJ8RWYLgDKJzCKQkmLKL1dcBa/cx9+BkSGEH/CReaBm1I32Hz7tueQcpAvjUT2M5xr7Dx1z8G0yD8Cb6wHHV4EHnVcGFJNPvyuPoDkzV1ZX2Dgp+BMAEZ3QjdpM5MqiqhxUwHwvqCeb+NRVV5xRSur9idn3+8IFpi2SQw+/Ri6k9L8n2yiz55k= vclt@ceph" > /home/vagrant/.ssh/id_rsa.pub

[ -d /root/.ssh ] || mkdir /root/.ssh
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDkXqEQpPbe+0gBqu2z207BllzAltG8/JBZRTX82yisu6KK/BSAm0OVgjbSnM6cRHleRPo3QOgY9cn7wV2RnwCbS0u1tG5vDl6Gcj985dBlPK4m+ByzHezEIYLD+gUiarZSHuRSVJaKe/hRh02jNSIk9zsmIs3JuN4SiE7q0YeYOVvl9EL/ZlL4e0b2sEUIQ2784q909qOSf92tvHxJnXKasMCHoAKZgHjuiIIDtX5hObCOQDB4Fu8S+yj0raWtnpQGRavXZ2t8dUDOG5ewDwulRXc/B3AhnCJtax2ekTkfJ6GQ19WG5zGX3k7sCT9HNE2WOYGeRaIhdaJ8RWYLgDKJzCKQkmLKL1dcBa/cx9+BkSGEH/CReaBm1I32Hz7tueQcpAvjUT2M5xr7Dx1z8G0yD8Cb6wHHV4EHnVcGFJNPvyuPoDkzV1ZX2Dgp+BMAEZ3QjdpM5MqiqhxUwHwvqCeb+NRVV5xRSur9idn3+8IFpi2SQw+/Ri6k9L8n2yiz55k= vclt@ceph" >> /root/.ssh/authorized_keys
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDkXqEQpPbe+0gBqu2z207BllzAltG8/JBZRTX82yisu6KK/BSAm0OVgjbSnM6cRHleRPo3QOgY9cn7wV2RnwCbS0u1tG5vDl6Gcj985dBlPK4m+ByzHezEIYLD+gUiarZSHuRSVJaKe/hRh02jNSIk9zsmIs3JuN4SiE7q0YeYOVvl9EL/ZlL4e0b2sEUIQ2784q909qOSf92tvHxJnXKasMCHoAKZgHjuiIIDtX5hObCOQDB4Fu8S+yj0raWtnpQGRavXZ2t8dUDOG5ewDwulRXc/B3AhnCJtax2ekTkfJ6GQ19WG5zGX3k7sCT9HNE2WOYGeRaIhdaJ8RWYLgDKJzCKQkmLKL1dcBa/cx9+BkSGEH/CReaBm1I32Hz7tueQcpAvjUT2M5xr7Dx1z8G0yD8Cb6wHHV4EHnVcGFJNPvyuPoDkzV1ZX2Dgp+BMAEZ3QjdpM5MqiqhxUwHwvqCeb+NRVV5xRSur9idn3+8IFpi2SQw+/Ri6k9L8n2yiz55k= vclt@ceph" > /root/.ssh/id_rsa.pub

cat > /root/.ssh/id_rsa << EOF
-----BEGIN OPENSSH PRIVATE KEY-----
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
OCal5a2NCyRA8AAAAIc2ViQHdvcmsBAgM=
-----END OPENSSH PRIVATE KEY-----
EOF
chmod 600 /root/.ssh/id_rsa
chown root:root /root/.ssh/id_rsa

if [ "$HOSTNAME" == "cephclt" ]; then
  dnf -y install xorg-x11-xauth
  dnf config-manager --enable powertools
  dnf -y install xorg-x11-apps
fi

